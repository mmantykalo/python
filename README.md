# üó∫Ô∏è Geosocial Network API

REST API –¥–ª—è –≥–µ–æ—Å–æ—Ü—ñ–∞–ª—å–Ω–æ—ó –º–µ—Ä–µ–∂—ñ, –¥–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å –¥—ñ–ª–∏—Ç–∏—Å—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—è–º–∏ –∑ –ø—Ä–∏–≤'—è–∑–∫–æ—é –¥–æ –∫–∞—Ä—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –ø–æ—Å—Ç–∏ —ñ–Ω—à–∏—Ö –ª—é–¥–µ–π.

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –∑ Docker

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- [Docker](https://docs.docker.com/get-docker/) 20.10+
- [Docker Compose](https://docs.docker.com/compose/install/) 2.0+

### –õ–æ–∫–∞–ª—å–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

1. **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:**

```bash
git clone <repository-url>
cd python-app.loc
```

2. **–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª –∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–∏–º–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:**

```bash
cp env.example .env
```

3. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ Cloudinary (–æ–ø—Ü—ñ–π–Ω–æ):**
   –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env` —Ñ–∞–π–ª —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –≤–∞—à—ñ Cloudinary credentials:

```bash
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret
```

4. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç:**

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ (API + PostgreSQL + Redis)
docker compose up -d

# –ê–±–æ —Ç—ñ–ª—å–∫–∏ API + PostgreSQL
docker compose up -d api db
```

5. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å:**

```bash
docker compose ps
```

### üìç –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤

- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (Swagger):** http://localhost:8000/docs
- **API:** http://localhost:8000
- **PostgreSQL:** localhost:5432
- **Redis:** localhost:6379

### üîß –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ API
docker compose logs -f api

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
docker compose logs -f db

# –ó—É–ø–∏–Ω–∏—Ç–∏ –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏
docker compose down

# –ó—É–ø–∏–Ω–∏—Ç–∏ —Ç–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ volume (–£–í–ê–ì–ê: –≤–∏–¥–∞–ª–∏—Ç—å –¥–∞–Ω—ñ –ë–î)
docker compose down -v

# –ü–µ—Ä–µ–±—É–¥—É–≤–∞—Ç–∏ API –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose build api

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ API –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose exec api bash

# –í–∏–∫–æ–Ω–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó (–∫–æ–ª–∏ –±—É–¥—É—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ñ)
docker compose exec api python -m alembic upgrade head
```

## üõ† –†–æ–∑—Ä–æ–±–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/           # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ core/          # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –±–µ–∑–ø–µ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ db/            # –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ models/        # SQLAlchemy –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ schemas/       # Pydantic —Å—Ö–µ–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ services/      # –ë—ñ–∑–Ω–µ—Å –ª–æ–≥—ñ–∫–∞
‚îú‚îÄ‚îÄ docker/            # Docker –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ main.py           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
‚îú‚îÄ‚îÄ pyproject.toml    # Poetry –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îî‚îÄ‚îÄ docker-compose.yml
```

### –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞ –±–µ–∑ Docker

–Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ —Ä–æ–∑—Ä–æ–±–ª—è—Ç–∏ –±–µ–∑ Docker:

1. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Poetry:**

```bash
curl -sSL https://install.python-poetry.org | python3 -
```

2. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**

```bash
poetry install
```

3. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ SQLite:**

```bash
# –î–ª—è SQLite (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
export DATABASE_URL="sqlite+aiosqlite:///./sql_app.db"

# –ê–±–æ –¥–ª—è PostgreSQL
export DATABASE_URL="postgresql+asyncpg://postgres:postgres@localhost:5432/geosocial_app"
```

4. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å API:**

```bash
poetry run python main.py
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö

- **User** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Å–∏—Å—Ç–µ–º–∏
- **Post** - –ø–æ—Å—Ç–∏ –∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—è–º–∏ —Ç–∞ –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—î—é
- **Like** - –ª–∞–π–∫–∏ –ø–æ—Å—Ç—ñ–≤
- **Comment** - –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ (–ø–ª–∞–Ω—É—î—Ç—å—Å—è)
- **Follow** - –ø—ñ–¥–ø–∏—Å–∫–∏ (–ø–ª–∞–Ω—É—î—Ç—å—Å—è)

### –ú—ñ–≥—Ä–∞—Ü—ñ—ó

–ú—ñ–≥—Ä–∞—Ü—ñ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –ø–æ–∫–∏ —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ API —á–µ—Ä–µ–∑ SQLAlchemy.

## üîë API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

- `POST /api/v1/register` - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
- `POST /api/v1/login` - –í—Ö—ñ–¥

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

- `GET /api/v1/me` - –ü–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
- `PUT /api/v1/me` - –û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å
- `GET /api/v1/users/{user_id}` - –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### –ü–æ—Å—Ç–∏

- `GET /api/v1/posts/` - –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç—ñ–≤ (—Å—Ç—Ä—ñ—á–∫–∞)
- `GET /api/v1/posts/map` - –ü–æ—Å—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç—ñ
- `POST /api/v1/posts/` - –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ—Å—Ç
- `GET /api/v1/posts/{post_id}` - –î–µ—Ç–∞–ª—ñ –ø–æ—Å—Ç–∞
- `PUT /api/v1/posts/{post_id}` - –û–Ω–æ–≤–∏—Ç–∏ –ø–æ—Å—Ç
- `DELETE /api/v1/posts/{post_id}` - –í–∏–¥–∞–ª–∏—Ç–∏ –ø–æ—Å—Ç

### –õ–∞–π–∫–∏

- `POST /api/v1/posts/{post_id}/like` - –õ–∞–π–∫–Ω—É—Ç–∏ –ø–æ—Å—Ç
- `DELETE /api/v1/posts/{post_id}/like` - –ü—Ä–∏–±—Ä–∞—Ç–∏ –ª–∞–π–∫
- `GET /api/v1/posts/{post_id}/likes` - –°–ø–∏—Å–æ–∫ –ª–∞–π–∫—ñ–≤

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤ (–∫–æ–ª–∏ –±—É–¥—É—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ñ)
docker compose exec api pytest

# –ê–±–æ –ª–æ–∫–∞–ª—å–Ω–æ
poetry run pytest
```

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **FastAPI** - Web framework
- **SQLAlchemy** - ORM –∑ async –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é
- **PostgreSQL** - –û—Å–Ω–æ–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **Redis** - –ö–µ—à—É–≤–∞–Ω–Ω—è (–æ–ø—Ü—ñ–π–Ω–æ)
- **Cloudinary** - –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è
- **Poetry** - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏

## üöß –°—Ç–∞—Ç—É—Å —Ä–æ–∑—Ä–æ–±–∫–∏

–ü—Ä–æ–µ–∫—Ç –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∞–∫—Ç–∏–≤–Ω—ñ–π —Ä–æ–∑—Ä–æ–±—Ü—ñ. –î–∏–≤—ñ—Ç—å—Å—è [DEVELOPMENT_PLAN.md](DEVELOPMENT_PLAN.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω—É.

### ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

- –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –ø–æ—Å—Ç–∞–º–∏
- –°–∏—Å—Ç–µ–º–∞ –ª–∞–π–∫—ñ–≤
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
- Docker –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### üöß –í —Ä–æ–∑—Ä–æ–±—Ü—ñ

- –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
- –ü—ñ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ü—Ä–∏–≤–∞—Ç–Ω—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–≤
- –ì–æ—Å—Ç—å–æ–≤–∏–π —Ä–µ–∂–∏–º

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License
